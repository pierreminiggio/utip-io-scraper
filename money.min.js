const{exec:exec}=require("child_process"),puppeteer=require("puppeteer"),rackupMoney=async(o,e,t,r)=>{let s={headless:!r};e&&(s.args=["--proxy-server=socks5://127.0.0.1:9050"]);const a=await puppeteer.launch(s);if(e){const o=await a.newPage();if(await o.goto("https://check.torproject.org/"),!await o.$eval("body",o=>o.innerHTML.includes("Congratulations. This browser is configured to use Tor")))return console.log(t,"Not using Tor. Closing..."),await a.close();console.log(t,"Puppeteer using tor, all good."),o.close()}try{const e=await a.newPage();e.goto("https://utip.io/"+o,{waitUntil:"networkidle2",timeout:0}),await e.waitFor(3e4),await e.click('img[src="https://cdn.utip.eu/build/images/play_white.2549a3e4.svg"]'),await e.waitFor(6e4)}catch(o){console.error(o)}a.close()};function startWithTor(o,e,t){console.log(t,"\n\nClear previous tor...\n\n\n\n"),exec('taskkill /IM "tor.exe" /F',(r,s,a)=>{r||!s||a?console.log(t,"Tor couldn't be stopped, probably already stopped"):console.log(t,"Tor stopped"),console.log(t,"Starting tor..."),exec("tor&",(o,e,r)=>{o||!e||r?console.error(t,"Error while starting tor, please make sure tor is started"):console.log(t,"Tor started")}),setTimeout(()=>{console.log(t,"Let's run an ad on "+o+"'s page :"),rackupMoney(o,!0,t,e).then(()=>{startWithTor(o,e,t)})},2e3)})}function startWithoutTor(o,e,t){console.log(t,"Let's run an ad on "+o+"'s page :"),rackupMoney(o,!1,t,e).then(()=>{startWithoutTor(o,e,t)})}function letsGo(){if(process.argv.length<3)console.warn('Use this program like this: "node money.js <your-utip-slug> <option: tor|both> <option: show>"');else{const o=process.argv[2],e=process.argv.length>3&&"tor"===process.argv[3],t=process.argv.length>3&&"both"===process.argv[3],r=process.argv.length>4&&"show"===process.argv[4];(e||t)&&startWithTor(o,r,"[35m"),e&&!t||startWithoutTor(o,r,"[33m")}}letsGo();